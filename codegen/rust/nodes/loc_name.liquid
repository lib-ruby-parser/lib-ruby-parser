// This file is autogenerated by {{ template }}

use super::LocName;
use crate::{Node, Loc};
use crate::nodes::*;

impl LocName {
    {% for loc_name in loc_names -%}
        {%- assign loc_field = loc_name | append: "_l" -%}

    fn get_{{ loc_field }}(node: &Node) -> Option<Loc> {
        match node {
            {%- for node in nodes -%}
                {%- for field in node.fields -%}
                    {%- if field.snakecase_name == loc_field %}
            Node::{{ node.camelcase_name }}({{ node.camelcase_name }} { {{ loc_field }}: loc, .. }) =>
                {%- if field.field_type == "Loc" -%}
                Some(*loc)
                {%- elsif field.field_type == "MaybeLoc" -%}
                *loc
                {%- endif -%},

                    {%- endif -%}
                {%- endfor -%}
            {%- endfor %}
            #[allow(unreachable_patterns)]
            _ => {
                panic!("node {} doesn't support {{ loc_field }} loc", node.str_type())
            }
        }
    }
    {% endfor %}

    pub(crate) fn get(&self, node: &Node) -> Option<Loc> {
        match self {
            {% for loc_name in loc_names -%}
                {%- assign loc_field = loc_name | append: "_l" -%}
                {%- assign loc_variant = loc_name | snakecase_to_camelcase -%}
                Self::{{ loc_variant }} => Self::get_{{ loc_field }}(node),
            {% endfor %}
        }
    }
}
